(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{49:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(0),r=a.n(s),c=a(16),o=a.n(c),i=(a(49),a(3)),l=a(11),u=a(12),d=a(14),j=a(13),b=a(17),p=a(5),h=a(23),m=a(39),O=a(8),g=a(18),f=a.n(g),v="GET_TASKS",x="DELETE_TASK",y="ADD_TASK",k="UPDATE_TASK",S="GET_ERRORS",N="CREATE_MESSAGE",w="USER_LOADING",T="USER_LOADED",C="AUTH_ERROR",A="LOGIN_SUCCESS",E="LOGIN_FAIL",I="LOGOUT_SUCCESS",L="REGISTER_SUCCESS",D="REGISTER_FAIL",_=function(e){return{type:N,payload:e}},R=function(e,t){return{type:S,payload:{msg:e,status:t}}},U=function(e){var t=e().auth.token,a={headers:{"Content-Type":"application/json"}};return t&&(a.headers.Authorization="Token ".concat(t)),a},F=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,a=e.user,s=Object(n.jsxs)("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0",children:[Object(n.jsx)("span",{className:"navbar-text mr-3",children:Object(n.jsx)("strong",{children:a?"Welcome ".concat(a.username):""})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("button",{onClick:this.props.logout,className:"nav-link btn btn-info btn-sm text-light",children:"Logout"})})]}),r=Object(n.jsxs)("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(b.b,{to:"/register",className:"nav-link",children:"Register"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(b.b,{to:"/login",className:"nav-link",children:"Login"})})]});return Object(n.jsx)("nav",{className:"navbar navbar-expand-sm navbar-light bg-light",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo01",children:Object(n.jsx)("a",{className:"navbar-brand",href:"#",children:"ToDo App"})}),t?s:r]})})}}]),a}(s.Component),G=Object(O.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e,t){f.a.post("/api/auth/logout/",null,U(t)).then((function(t){e({type:"CLEAR_LEADS"}),e({type:I})})).catch((function(t){e(R(t.response.data,t.response.status))}))}}})(F),M=a(19),P=(a(73),function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={title:"",editask:"",editing:!1,textrow:1},e.onChange=function(t){e.setState(Object(M.a)({},t.target.name,t.target.value)),(e.state.textrow<parseInt(e.state.title.length/50+1)||e.state.textrow>parseInt(e.state.title.length/50+1))&&e.setState({textrow:parseInt(e.state.title.length/50+1)})},e.onSubmit=function(t){if(t.preventDefault(),!1===e.state.editing){var a={title:e.state.title};e.props.addTask(a),e.setState({title:""})}else if(!0===e.state.editing){var n=e.state.editask;n.title=e.state.title,e.props.updateTask(n),e.setState({editing:!1,title:"",editask:""})}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.getTasks()}},{key:"strikeUnstrike",value:function(e){e.completed=!e.completed,this.props.updateTask(e)}},{key:"onEdit",value:function(e){this.setState({editask:e,title:e.title,editing:!0,textrow:parseInt(e.title.length/50+1)})}},{key:"onReset",value:function(){this.setState({editing:!1,title:"",editask:"",textrow:1})}},{key:"render",value:function(){var e=this,t=this.state.title;return Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)("div",{id:"task-container",children:Object(n.jsx)("div",{id:"form-wrapper",children:Object(n.jsx)("form",{onSubmit:this.onSubmit,id:"form",children:Object(n.jsxs)("div",{className:"flex-wrapper",children:[Object(n.jsx)("div",{style:{flex:15},children:Object(n.jsx)("textarea",{onChange:this.onChange,rows:this.state.textrow,className:"form-control",id:"title",value:t,type:"text",name:"title",placeholder:"Add task.."})}),Object(n.jsx)("div",{style:{flex:1},onClick:function(){return e.onReset()},className:"resetBtn",children:"X"}),Object(n.jsx)("div",{style:{flex:2},children:!1===this.state.editing?Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}):Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Edit"})})]})})})}),Object(n.jsx)("h2",{children:"Tasks"}),Object(n.jsx)("ul",{className:"tilesWrap",children:this.props.tasks.map((function(t,a){return Object(n.jsxs)("li",{children:[Object(n.jsxs)("h2",{children:["0",a+1]}),Object(n.jsx)("div",{className:"tasktitle",onClick:function(){return e.strikeUnstrike(t)},children:!1===t.completed?Object(n.jsx)("p",{children:t.title}):Object(n.jsx)("strike",{children:t.title})}),Object(n.jsxs)("button",{onClick:function(){return e.onEdit(t)},className:"btn btn-info btn-sm",children:[" ","Edit"]}),Object(n.jsxs)("button",{onClick:e.props.deleteTask.bind(e,t.id),className:"btn btn-danger btn-sm",children:[" ","Delete"]}),Object(n.jsxs)("div",{className:"taskDate",children:["Added on: ",t.created_at.substring(0,10)]})]},t.id)}))})]})}}]),a}(s.Component)),J=Object(O.b)((function(e){return{tasks:e.tasks.tasks.sort((function(e,t){return e.created_at<t.created_at?1:-1}))}}),{getTasks:function(){return function(e,t){f.a.get("/api/tasks/",U(t)).then((function(t){e({type:v,payload:t.data})})).catch((function(t){return e(R(t.response.data,t.response.status))}))}},deleteTask:function(e){return function(t,a){f.a.delete("/api/tasks/".concat(e,"/"),U(a)).then((function(a){t(_({deleteTask:"Task Deleted"})),t({type:x,payload:e})})).catch((function(e){return console.log(e)}))}},addTask:function(e){return function(t,a){f.a.post("/api/tasks/",e,U(a)).then((function(e){t(_({addTask:"Task Added"})),t({type:y,payload:e.data})})).catch((function(e){return t(R(e.response.data,e.response.status))}))}},updateTask:function(e){return function(t,a){f.a.patch("/api/tasks/".concat(e.id,"/"),{completed:e.completed,title:e.title},U(a)).then((function(e){t(_({updateTask:"Task Updated"})),t({type:k,payload:e.data})})).catch((function(e){return t(R(e.response.data,e.response.status))}))}}})(P);function K(){return Object(n.jsx)(s.Fragment,{children:Object(n.jsx)(J,{})})}var B=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:""},e.onSubmit=function(t){t.preventDefault(),e.props.login(e.state.username,e.state.password)},e.onChange=function(t){return e.setState(Object(M.a)({},t.target.name,t.target.value))},e}return Object(u.a)(a,[{key:"render",value:function(){if(this.props.isAuthenticated)return Object(n.jsx)(p.a,{to:"/"});var e=this.state,t=e.username,a=e.password;return Object(n.jsx)("div",{className:"col-md-6 m-auto",children:Object(n.jsxs)("div",{className:"card card-body mt-5",children:[Object(n.jsx)("h2",{className:"text-center",children:"Login"}),Object(n.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Username"}),Object(n.jsx)("input",{type:"text",className:"form-control",name:"username",onChange:this.onChange,value:t})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Password"}),Object(n.jsx)("input",{type:"password",className:"form-control",name:"password",onChange:this.onChange,value:a})]}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})}),Object(n.jsxs)("p",{children:["Don't have an account? ",Object(n.jsx)(b.b,{to:"/register",children:"Register"})]})]}),Object(n.jsx)("p",{children:"**Username and Password is case sensitive"})]})})}}]),a}(s.Component),W=Object(O.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(a){var n=JSON.stringify({username:e,password:t});f.a.post("/api/auth/login",n,{headers:{"Content-Type":"application/json"}}).then((function(e){a({type:A,payload:e.data})})).catch((function(e){a(R(e.response.data,e.response.status)),a({type:E})}))}}})(B),z=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",email:"",password:"",password2:""},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,s=a.email,r=a.password;if(r!==a.password2)e.props.createMessage({passwordNotMatch:"Passwords do not match"});else{var c={username:n,password:r,email:s};e.props.register(c)}},e.onChange=function(t){return e.setState(Object(M.a)({},t.target.name,t.target.value))},e}return Object(u.a)(a,[{key:"render",value:function(){if(this.props.isAuthenticated)return Object(n.jsx)(p.a,{to:"/"});var e=this.state,t=e.username,a=e.email,s=e.password,r=e.password2;return Object(n.jsx)("div",{className:"col-md-6 m-auto",children:Object(n.jsxs)("div",{className:"card card-body mt-5",children:[Object(n.jsx)("h2",{className:"text-center",children:"Register"}),Object(n.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Username"}),Object(n.jsx)("input",{type:"text",className:"form-control",name:"username",onChange:this.onChange,value:t})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Email"}),Object(n.jsx)("input",{type:"email",className:"form-control",name:"email",onChange:this.onChange,value:a})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Password"}),Object(n.jsx)("input",{type:"password",className:"form-control",name:"password",onChange:this.onChange,value:s})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Confirm Password"}),Object(n.jsx)("input",{type:"password",className:"form-control",name:"password2",onChange:this.onChange,value:r})]}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Register"})}),Object(n.jsxs)("p",{children:["Already have an account? ",Object(n.jsx)(b.b,{to:"/login",children:"Login"})]})]})]})})}}]),a}(s.Component),H=Object(O.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{register:function(e){var t=e.username,a=e.password,n=e.email;return function(e){var s=JSON.stringify({username:t,email:n,password:a});f.a.post("/api/auth/register",s,{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:L,payload:t.data})})).catch((function(t){e(R(t.response.data,t.response.status)),e({type:D})}))}},createMessage:_})(z),X=a(43),q=Object(O.b)((function(e){return{auth:e.auth,errors:e.errors}}))((function(e){var t=e.component,a=e.auth,s=e.errors,r=Object(X.a)(e,["component","auth","errors"]);return Object(n.jsx)(p.b,Object(i.a)(Object(i.a)({},r),{},{render:function(e){return 401===s.status&&(localStorage.removeItem("token"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("user"),window.location.reload(!1)),a.isLoading?Object(n.jsx)("h2",{children:"Loading..."}):a.isAuthenticated?Object(n.jsx)(t,Object(i.a)({},e)):Object(n.jsx)(p.a,{to:"/login"})}}))})),Q=a(20),V=a(41),Y=a(42),Z=a(29),$={tasks:[]},ee={msg:{},status:null},te={},ae={token:localStorage.getItem("token"),isAuthenticated:localStorage.getItem("isAuthenticated"),isLoading:!1,user:JSON.parse(localStorage.getItem("user"))},ne=Object(Q.combineReducers)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(i.a)(Object(i.a)({},e),{},{tasks:t.payload});case x:return Object(i.a)(Object(i.a)({},e),{},{tasks:e.tasks.filter((function(e){return e.id!==t.payload}))});case y:return Object(i.a)(Object(i.a)({},e),{},{tasks:[].concat(Object(Z.a)(e.tasks),[t.payload])});case k:return Object(i.a)(Object(i.a)({},e),{},{tasks:Object(Z.a)(e.tasks)});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return{msg:t.payload.msg,status:t.payload.status};default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return t.payload;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(i.a)(Object(i.a)({},e),{},{isLoading:!0});case T:return Object(i.a)(Object(i.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:t.payload});case A:case L:return localStorage.setItem("token",t.payload.token),localStorage.setItem("isAuthenticated",!0),localStorage.setItem("user",JSON.stringify(t.payload.user)),Object(i.a)(Object(i.a)(Object(i.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case C:case E:case I:case D:return localStorage.removeItem("token"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("user"),Object(i.a)(Object(i.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}}}),se=[Y.a],re=Object(Q.createStore)(ne,{},Object(V.composeWithDevTools)(Q.applyMiddleware.apply(void 0,se))),ce=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.error,n=t.alert,s=t.message;a!==e.error&&(a.msg.title&&n.error(a.msg.title.join()),a.msg.email&&n.error(a.msg.email.join()),a.msg.password&&n.error("Password: ".concat(a.msg.password.join())),a.msg.non_field_errors&&n.error(a.msg.non_field_errors.join()),a.msg.username&&n.error("Username: ".concat(a.msg.username.join()))),s!==e.message&&(s.deleteTask&&n.success(s.deleteTask),s.addTask&&n.success(s.addTask),s.updateTask&&n.success(s.updateTask),s.passwordNotMatch&&n.error(s.passwordNotMatch))}},{key:"render",value:function(){return Object(n.jsx)(s.Fragment,{})}}]),a}(s.Component),oe=Object(O.b)((function(e){return{error:e.errors,message:e.messages}}))(Object(h.b)()(ce)),ie={timeout:3e3,position:"top center"},le=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsx)(O.a,{store:re,children:Object(n.jsx)(h.a,Object(i.a)(Object(i.a)({template:m.a},ie),{},{children:Object(n.jsx)(b.a,{children:Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)(G,{}),Object(n.jsx)(oe,{}),Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)(p.d,{children:[Object(n.jsx)(q,{exact:!0,path:"/",component:K}),Object(n.jsx)(p.b,{exact:!0,path:"/register",component:H}),Object(n.jsx)(p.b,{exact:!0,path:"/login",component:W})]})})]})})}))})}}]),a}(s.Component),ue=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,77)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(le,{})}),document.getElementById("root")),ue()}},[[74,1,2]]]);
//# sourceMappingURL=main.5a0ef7f2.chunk.js.map